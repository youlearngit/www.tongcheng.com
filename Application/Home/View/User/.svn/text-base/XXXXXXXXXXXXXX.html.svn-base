<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>注册会员-58同城</title>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<link rel="Shortcut Icon" href="https://passport.58.com/cdnpic2/images/favicon.ico" type="image/x-icon">
<!--
<script type="text/javascript">document.domain = '58.com';try{var ____json4fe = {catentry:{dispid:'',name:'',listname:''},locallist:{dispid:'',name:'',listname:''},modules:'passport'}}catch(e){}; </script>
-->
<script src="__PUBLIC__/Home/js/jquery1.js" type="text/javascript"></script>
<script src="__PUBLIC__/Home/js/boot_passport_version_v0.js" type="text/javascript"></script><script type="text/javascript" src="__PUBLIC__/Home/js/828ef34c77a2cbed693ba874ce570dfe_002.js"></script>
<script type="text/javascript" src="__PUBLIC__/Home/js/828ef34c77a2cbed693ba874ce570dfe.js"></script>

<link rel="stylesheet" href="__PUBLIC__/Home/css/login_6_v20150304144336.css" type="text/css"><link rel="stylesheet" href="__PUBLIC__/Home/css/login_6_v0.css" type="text/css">
<style>
.porleft p {
 height: 35px;
}
.fb{ font-weight:bold;}
.link-login{font-family: '宋体';}
.porleft{height:800px;}
#nextwrap{position:relative;}
#validatecode{width:75px;}
#pre{font-size:12px;line-height:34px;cursor:pointer;}
.btnGray input.disable{color:#a0a0a0;cursor:default;}
</style>
<script type="text/javascript">
var cur_tab = 'weixin';
</script>
</head>
<body>
	<div id="header" class="win1000">
		<a id="logo" href="http://www.58.com/"><img alt="中文最大生活信息门户" src="__PUBLIC__/Home/images/logo-49h.gif"></a>
		<div id="cityname" class="regname"><span>用户注册</span></div>
		<div id="logintext"><a href="http://www.58.com/">返回首页</a>|<a target="_blank" href="http://about.58.com/">帮助</a></div>
	</div>
	<div class="cb win1000">
		<form id="submitForm" action="/doregister" method="post" name="submitForm" target="formSubmit">
		<div class="porleft">
			<input name="ptk" id="ptk" value="54da86057cd7474fb290f9c9f6e5f37c" type="hidden">
			<input name="cd" id="cd" value="9632" type="hidden">
						<input name="utm_source" value="market" type="hidden">
			<input name="spm" value="b-31580022738699-pe-f-851.sogoupz_biaoti" type="hidden">
			            <div class="regMenu">
               <span id="weixinRegTab" class=""><a href="javascript:void(0);" onclick="cur_tab='weixin';clickLog('from=reg_'+cur_tab);">微信注册</a></span>
               <span class="" id="mobileRegTab"><a href="javascript:void(0);" onclick="cur_tab='phone';clickLog('from=reg_'+cur_tab);">手机注册</a></span>
               <span class="active" id="regTab"><a href="javascript:void(0);" onclick="cur_tab='mail';clickLog('from=reg_'+cur_tab);">邮箱注册</a></span>
               <span class="" id="loginTab">已有账号？<a href="https://passport.58.com/login/">去登录</a></span>
            </div>
            <div class="regWrap">
				<div style="display: none;" id="weixinReg">
					<div id="weixinLeft">
                    <div id="wxwrap">
                        <div id="ewmwrap">
                            <p>微信扫描二维码快速注册</p>
                            <div id="ewmimgwrap">
                                <img src="__PUBLIC__/Home/images/showqrcode.jpg" id="wxqrcodeImg" height="149" width="149">
                                <div id="expireMask" style="display:none;"><div></div><p>请点击刷新</p></div>
                            </div>
                        </div>
                        <div id="tipwrap" style="display:none">
                            <img src="__PUBLIC__/Home/images/weixin_logintip.png">
                        </div>
                    </div>
                    <div id="showtip"><a href="javascript:void(0);">使用帮助</a></div>
					</div>
					<div id="weixinRight">
						<img src="__PUBLIC__/Home/images/weixinreg.png">
						<p class="wxregflow">扫码 &gt; 关注 &gt; 确认 &gt; 安全注册成功</p>
						<p>用微信扫左侧二维码安全注册58账号：<br>1、防止木马窃取密码<br>2、防止键盘录制类盗号<br>3、绑定微信提高安全级别</p>
					</div>
				</div>
				<div id="origReg" style="">
                <!-- 邮箱注册 -->
                <div id="regCon" style="">
                    <p>
                    	<span class="regtlx">用　户　名</span>
                        <input size="20" class="inp inw" id="nickName" maxlength="20" name="nickName" style="" type="text">
                        <span id="nickName_Tip"></span> 
                    </p>
                    <div id="reg-keyword-username" class="w234-ui2" style="display:none">
                        <i></i>
                        <p class="ui2-key-t"><a title="关闭" href="javascript:clearSug('username');">×</a>选择推荐用户名：</p>
                        <ul id="username_comp">
                        </ul>
                    </div>
                    <p>
                    	<span class="regtlx">电&nbsp;子&nbsp;邮&nbsp;箱</span>
                        <input size="20" class="inp inw" id="txtemail" name="txtemail" style="" type="text">
                        <span id="txtemail_Tip"></span> 
                    </p>
                    <div id="reg-keyword-email" class="w234-ui2" style="display:none">
                        <i></i>
                        <p class="ui2-key-t"><a title="关闭" href="javascript:clearSug('email');">×</a>请选择你的邮箱类型：</p>
                        <ul id="email_comp">
                        </ul>
                    </div>
                </div>
                
                <!-- 手机注册 -->
                <div style="display: none;" id="mobileRegCon">
                    <p>
                    	<span class="regtlx">手　机　号</span>
                        <input style="display: none;" size="20" class="inp inw" id="mobile" maxlength="20" name="mobile" type="text">
                    	<span id="mobile_Tip"></span> 
                    </p>                   
                </div>
                
                
               <div id="passwordCon">
                <p>
                	<span class="regtlx">密　　　码</span>
                    <input size="30" name="password" id="password" class="inp inw" onkeyup="$.c.user.reg.CheckPasswordStrength(this)" onpaste="return false" maxlength="16" type="password">
                    <span id="password_Tip" style="z-index: 100;"></span> 
                </p>
                <p id="cpp">
                	<span class="regtlx">确&nbsp;认&nbsp;密&nbsp;码</span>
                    <input size="30" name="cpassword" id="cpassword" class="inp inw" maxlength="16" onpaste="return false" type="password">
                    <span id="cpassword_Tip"></span> 
                </p>
				</div>
				<div style="display: none;" id="verifyCode">
                    <p>
                    	<span class="regtlx">验　证　码</span>
                        <input class="inp inw" id="validatecode" maxlength="5" name="validatecode" size="2" type="text"><img onclick="refreshValidatecode(); return false" name="vcodeImg" id="vcodeImg" style="cursor: pointer; height: 32px;" src="__PUBLIC__/Home/images/validatecode.jpg" align="absmiddle"><a onclick="refreshValidatecode(); return false" href="javascript:void(0)" class="f12">看不清？</a>
                    	<span id="validatecode_Tip"></span> 
                    </p>
                    <script type="text/javascript">
                        function refreshValidatecode(){
                           document.getElementById('vcodeImg').src='/validatecode?temp=123'+ (new Date().getTime().toString(36)); _gaq.push(['pageTracker._trackEvent', '58_my', 'passport', 'refresh']);
                        }
                    </script>
                </div>
				<div style="display: none;" id="mobileCodeCon">
					<p>
						<span class="regtlx">手&nbsp;机&nbsp;号&nbsp;码</span>
						<span id="nextmobile"></span> <span id="mobile_Tip2"></span> 
					</p>
					<p id="sendbtnp" class="p2 f12 ">
						<span class="regtlx">&nbsp;</span>
						<label class="fs-btn-h btnGray"><input class="" name="resendbtn" onclick="resendcode()" id="resendbtn" value="获取手机确认码" type="button"></label>
						<span id="resendcode_Tip"></span>
					</p>
					<p>
						<span class="regtlx">手机确认码</span>
						<input style="display: none;" size="20" maxlength="6" class="inp inw" id="mobilecode" name="mobilecode" type="text">
						<span id="mobilecode_Tip"></span> 
					</p>
				</div>
                
                
            
                <p class="agreement">
                    <span class="regtlx">&nbsp;</span>
                    <input checked="checked" id="chkagreement" name="chkagreement" type="checkbox"> <span>我已阅读并同意</span><a target="_blank" href="http://about.58.com/home/announcement.html">《58同城使用协议》</a>
                    <span id="chkagreement_Tip"></span>
                </p>
                
                <p style="" class="submitwrap">
                    <span class="regtlx">&nbsp;</span>
                    <label id="butt" class="butt"><input class="btns" value="立即注册" checked="checked" id="btnSubmit" style="width:110px;height:34px;" onclick="clickLog('from=reg_'+cur_tab+'_submit');" type="submit"></label>
                    <span id="gologin"><span id="loginOpt">已有账号？<a href="https://passport.58.com/login/">去登录</a></span></span><span style="display: none;" id="pre"><a herf="javascript:;">返回上一步</a></span>
                </p>
                
                
                 <p style="display: none;" id="nextwrap">
                    <span class="regtlx">&nbsp;</span>
                    <label id="butt" class="butt"><input class="btns" value="确定" checked="checked" id="btnNext" style="width:110px;height:34px;" type="button"></label>
                    <span id="loginOpt">已有账号？<a href="https://passport.58.com/login/">去登录</a></span>
                </p>
				</div>
				
            </div>
		</div>
		<input name="mcresult" value="undefined" style="display:none"><input name="mcresult" value="undefined" style="display:none"></form>
	</div>
	<div id="footer" class="win1000">
		<p>© 58.com <a class="fduihua" target="_blank" title="有问题请与58客服进行对话" href="http://about.58.com/">与58对话</a></p>
	</div>






<script>
var needValidMobile =  false ; 
$(function(){
	$("#btnNext").click(function(){
		var mobileVal = $("#mobile").val();
		var reg = new RegExp(/^(13|14|18|15)\d{9}$/);
        if($("#password").val().length==0){
            $.formValidator.setTipState(null, "onError", '您还没有输入密码', 'password_Tip');
        }
        if($("#cpassword").val().length==0){
            $.formValidator.setTipState(null, "onError", '密码不一致，请再次确认', 'cpassword_Tip');
        }
        if($("#mobile").val().length==0){
            $.formValidator.setTipState(null, "onError", '请输入您的手机号码', 'mobile_Tip');
        }
        
		if($("#password_Tip").hasClass("wrong1")||$("#cpassword_Tip").hasClass("wrong1")||$("#password").val().length==0||$("#cpassword").val().length==0||$("#mobile_Tip").hasClass("wrong1")||$("#mobile").val().length==0){
			//alert('1');
			return;
		}
    
    	var timesign = new Date().getTime() + timespan;
    	var mobile = $("#mobile").val();
    	var validatecode =  $("#validatecode").val();
    	if(mobile==null || mobile.length==0){
    		$.formValidator.setTipState(null, "onError", '请填写手机号码', 'mobile_Tip');
    		return;
    	}
    	if(!validMobileFormat(mobile)){
    		$.formValidator.setTipState(null, "onError", '手机号码格式错误', 'mobile_Tip');
    		return;
    	}
    	
    	var result = $("#chkagreement:checked").size();
    	if(result <= 0 ){
    		$.formValidator.setTipState(null, "onError", '请查看58同城使用协议，并选择！', 'chkagreement_Tip');
    		return;
    	}
    	
    	
    	
    	 $("#btnNext").attr("disabled",true);
    	 $.get("/sendregmobilecode",
				{
					"mobile":mobile,
					"timesign":timesign,
					"validatecode":validatecode,
					"p":getm32str(mobile,timesign+"")
				},
				function(result){
				    $("#btnNext").attr("disabled",false);
				    refreshValidatecode();
					if(result=="1"){					   	
						$(".submitwrap,#mobileCodeCon").show();
						$("#passwordCon,#mobileRegCon,#verifyCode,#nextwrap,.agreement").hide();
						$("#nextmobile").text($("#mobile").val());
						$("#pre").show();
						$("#gologin").hide();
					
						$("#resendcode_Tip").addClass("chenggong");
						$("#resendcode_Tip").html("确认码短信已发送到您的手机，请查收");
						resendtime = 180;
						countresent(resendtime);
					}else{
						$("#resendcode_Tip").removeClass("chenggong");
						$("#resendcode_Tip").html("");
						if(result=="5"){
							$.formValidator.setTipState(null, "onError", '该手机号码已被注册。您可以使用该手机号码<a href="/login">登录</a>，如果您忘记密码请点击<a href="/forgetpassword">找回密码</a>。', 'mobile_Tip');
						}else if(result=="6"){
							$.formValidator.setTipState(null, "onError", '该手机号码今天发送验证码过多', 'mobile_Tip');
						}else if(result=="7"){
							$.formValidator.setTipState(null, "onError", '验证码错误','validatecode_Tip');
						}else{
							$.formValidator.setTipState(null, "onError", '手机号码格式错误', 'mobile_Tip');
						}
					}
				},"html");
   
        
       
		
	
	});
	$("#pre").click(function(){
		$(".submitwrap,#mobileCodeCon").hide();
		$("#passwordCon,#mobileRegCon,#verifyCode,#nextwrap,.agreement").show();
        $("#mobile_Tip2").removeClass('wrong1').html("");
        $("#validatecode").val("");
        $("#validatecode_Tip").removeClass("chenggong");
         $("#btnNext").attr("disabled",false);
	});
	$("#weixinRegTab").click(function(){
    	$(this).addClass('active').siblings().removeClass('active');
		$("#origReg").hide();
		$("#weixinReg").show();
    });
    $("#mobileRegTab").click(function(){
    	$(this).addClass('active').siblings().removeClass('active');
    	$("#mobileRegCon,#verifyCode").show();
		$(".submitwrap,#mobileCodeCon").hide();
		$("#passwordCon,#mobileRegCon,#verifyCode,#nextwrap,.agreement").show();
    	$("#regCon").hide();
    	$("#nickName").hide();
    	$("#txtemail").hide();
    	$("#mobile").show();
    	$("#mobilecode").show();
    	$("#submitForm").attr("action", "/domobileregister");
    	$("#weixinReg").hide();
    	$("#origReg").show();
    });
    $("#regTab").click(function(){
    	$(this).addClass('active').siblings().removeClass('active');
    	$("#regCon").show();
    	$("#nickName").show();
    	$("#txtemail").show();
    	//if(!needValidMobile){
	    	$("#mobileRegCon,#verifyCode,#mobileCodeCon,#pre,#nextwrap").hide();
			$("#passwordCon,#gologin,.submitwrap,.agreement").show();
	    	$("#mobile").hide();
	    	$("#mobilecode").hide();
    	//}
    	$("#submitForm").attr("action", "/doregister");
    	$("#weixinReg").hide();
    	$("#origReg").show();
    });
    $('#showtip a').mouseover(function(){
        $('#ewmwrap').fadeOut();
        $('#tipwrap').fadeIn();
    }).mouseout(function(){
        $('#ewmwrap').fadeIn();
        $('#tipwrap').fadeOut();
    });
    
})
</script>
<!-- <iframe name="formSubmit" id="formSubmit" src="__PUBLIC__/Home/lib/submit.htm" style="display: none;"></iframe> -->
<script type="text/javascript">
	var showSugTime;
	var timespan = 1446795949364 - new Date().getTime();
	var passporttimeout;
	function clearPassportTimeout(){
    	clearTimeout(passporttimeout);
    }
	
	$(function() {
        $.formValidator.initConfig({ formid: "submitForm", errorfocus: true, btnid: 'btnSubmit', btnvalue: '同意以下协议，并注册', btnactionvalue: '注册中....', fun: function() {
        	passporttimeout = setTimeout(function(){
            //	alert("服务器繁忙，请稍后再试");
            	$.formValidator.subfalse('submitForm', 'btnSubmit', '注册');
            },5000);
        	return true;
        }
        });
        $("#nickName").formValidator({ onfocus: "4-20位，可由汉字、数字、字母和“_”组成，注册成功后用户名不可修改" }).inputValidator({ onerror: "您还没有输入用户名" }).functionValidator({ fun: function(val, elem) {
        	if (val.match("^[\\d]+$")) { return "用户名不能全为数字"; }
        	
        	var msg = $.c.user.reg.checknickname(val);
            if (msg == "") { return true; }
            msg = "用户名需为4-20个字符（包括汉字、数字、字母、下划线，每个汉字为2字符）";
            return msg;
        },
            onerror: "您还没有输入用户名"
        }).ajaxValidator({ checkfun: function(val, elem, fun) {
            $.c.user.reg.checknameexist(val, fun, function(e){$.formValidator.setTipState(null, "clear", ' ', 'nickName_Tip');});
        }
        });
        $("#nickName").blur(function() {
            $(this).val($.formValidator.QtoB(this.value));
        }).keyup(function() {
        	clearSug();
        });
        var _txtemail__suffix = "";
        $("#txtemail").formValidator({ onfocus: "请输入有效的电子邮箱，可用于登录和找回密码" }).inputValidator({ onerror: "您还没有输入电子邮箱" }).functionValidator({ fun: function(val, elem) {
        	var _suffix = val.substring(val.length-3,val.length);
			if(/.co|.ne|.or/.test(_suffix)){
				switch(_suffix){
					case ".co":
						val += "m";
						_txtemail__suffix = "com";
						break;
					case ".ne":
						val += "t";
						_txtemail__suffix = "net";
						break;
					case ".or":
						val += "g";
						_txtemail__suffix = "org";
						break;
				}
				$("#txtemail").val(val);
			}else{
				_txtemail__suffix = "";
			}

        	var msg = $.c.user.reg.checkemail(val);
            if (msg == "") { clearSug();return true; }
       
            return msg;
        }
        }).ajaxValidator({ checkfun: function(val, elem, fun) {
        	$.c.user.reg.checkemailexist(val, function(a){
        		fun(a);
        		if(_txtemail__suffix != "" && a == 1){
	    			$("#txtemail_Tip").attr("class","chenggong").empty().append("<span style='font-size:12px;color:#666;margin-top:-4px;'>已经自动帮你补全为."+_txtemail__suffix +"的邮箱</span>");
	   			}
        	}, function(e){
        		$.formValidator.setTipState(null, "clear", ' ', 'txtemail_Tip');

        	});
        	
        }
        });



        // $("#txtemail").keyup(function(e) {
        // 	if(e.keyCode==40 || e.keyCode==38 || e.keyCode==13){return;}
        //     var sugEmail = ["@163.com","@qq.com","@126.com","@hotmail.com","@gmail.com","@sohu.com","@sina.com","@sina.cn","@yahoo.com","@139.com.cn","@189.cn"];
        //     var email = $("#txtemail").val().trim();
        //     clearSug();
        //     if(email.indexOf("@")==0 || email.length==0 || email.indexOf("<")>-1 || email.indexOf(">")>-1){
        //     	return;
        //     }
        //    	var sugEmail1=[];
        //    	var perfix = (email.indexOf("@")==-1)?email:email.substring(0,email.indexOf("@"));
        //     $.each(sugEmail,function(i,n){
        //     	if((perfix+sugEmail[i]).indexOf(email)==0){
        //     		sugEmail1[sugEmail1.length] = perfix+sugEmail[i];
        //     	}
        // 	});
        //     if(sugEmail1.length>0){
        //     	showSug(sugEmail1,"txtemail");
        //     }
        // }).keydown(function(e){
        // 	var $regkeylist=$("#reg-keyword");
        // 	if($regkeylist && $regkeylist.is(":visible")){
        		
        // 		if(e.keyCode==40){//向下
        // 			var $list=$regkeylist.find("li.reg-keyahover");
        // 			if($list && $list.length>0){
        // 				if($list.next()){
        // 					$list.removeClass("reg-keyahover");
        // 					$list.next().addClass("reg-keyahover");
        // 				}else{
        // 					$list.removeClass("reg-keyahover");
        // 					$($regkeylist.find("li")[0]).addClass("reg-keyahover");
        // 				}
        				
        // 			}else{
        // 				$($regkeylist.find("li")[0]).addClass("reg-keyahover");
        				
        // 			}
        			
        // 			e.stopPropagation(); 
        // 			return false;
        // 		}else if(e.keyCode==38){//向上
        // 			var $list=$regkeylist.find("li.reg-keyahover");
        // 			if($list && $list.length>0){
        // 				if($list.prev()){
        // 					$list.removeClass("reg-keyahover");
        // 					$list.prev().addClass("reg-keyahover");
        // 				}else{
        // 					$list.removeClass("reg-keyahover");
        // 					$regkeylist.find("li:last").addClass("reg-keyahover");
        // 				}
        				
        // 			}else{
        // 				$regkeylist.find("li:last").addClass("reg-keyahover");
        				
        // 			}
        // 			e.stopPropagation(); 
        // 			return false;
        // 		}else if(e.keyCode==13){//回车
        // 			var $list=$regkeylist.find("li.reg-keyahover");
        // 			if($list && $list.length>0){
        // 					fillText('txtemail',$list[0])
        			
        // 				}
        // 			e.stopPropagation(); 
        // 			return false;
        // 		}
        	
        // 	}
        // });



        $("#password").formValidator({ onfocus: "密码需由6-16个字母、数字和符号组成，区分大小写；不能使用重复、连续的字母、数字或符号" }).inputValidator({ onerror: "您还没有输入密码" }).regexValidator({ regexp: "^(.){6,}$#^(.){6,16}$", onerror: "密码太短，最少为6位。#密码不应超过16个字符。" }).functionValidator({ fun: function(val, elem) {
        	var pwd = val.toLowerCase();
            if(pwd.match("^[a-z|A-Z]+$") && (isContinuousChar(pwd) || isSameChar(pwd))){
            	return "为了您的账户安全，密码不能为重复数字和连续字母";
            }
            if(pwd.match("^[\\d]+$") && (isContinuousChar(pwd) || isSameChar(pwd))){
            	return "为了您的账户安全，密码不能为重复数字和连续数字";
            }
            if(isSameChar(pwd)){
            	return "密码不能全为相同的字符";
            }
        	return true;
        }
        }).compareValidator({
            desid: "nickName", operateor: "!=", onerror: "密码不能与用户名一样", datatype: "string"
        });
        $("#cpassword").formValidator({ onfocus: "请再次输入您的密码" }).inputValidator({ onerror: "密码不一致，请再次确认" }).regexValidator({ regexp: "^[\\s\\S]{6,}$#^(.){6,16}$", onerror: "密码太短，最少为6位。#密码不应超过16个字符。" }).functionValidator({ fun: function(val, elem) {

        }
        }).compareValidator({
            desid: "password", operateor: "=", onerror: "密码不一致，请再次确认", datatype: "string"
        });
        $("#mobile").formValidator({ onfocus: "请输入您的手机号码" }).inputValidator({ onerror: "请输入您的手机号码" }).functionValidator({ fun: function(val, elem) {
        	if(validMobileFormat(val)){
            	return true;
            }else{
            	return '手机号码格式错误';
            }
        },
            onerror: "手机号码格式错误"
        });
        $("#mobilecode").formValidator({ onfocus: "请输入您的手机确认码" }).inputValidator({ onerror: "请输入您的手机确认码" });
        
        
        var resendtime = 0;                
        if(resendtime>=0){
        	countresent(resendtime);
        }
        $("#chkagreement").formValidator({ tipid: 'chkagreement_Tip', onfocus: '' }).functionValidator({ fun: function(val, elem) {
            var result = $("#chkagreement:checked").size();
            if (result > 0) return true;
            return "请查看58同城使用协议，并选择！";
        }
        });
        $("#txtemail").val("");
        $("#password").val("");
        $("body").click(function(){
        	if(new Date().getTime()-showSugTime>1000){
        		clearSug();
        		clearSug("username");
        	}
        });
    });
	var vcodesel;
	function countresent(resendtime){
	     if(vcodesel){
	        clearInterval(vcodesel);
	     }
		 vcodesel= setInterval(function(){
           if(resendtime==0){
             $("#resendbtn").attr("disabled",false);
             $("#resendbtn").removeClass("disable");
             $("#resendbtn").val("获取手机确认码");
             clearInterval(vcodesel);
             return;
           }
           $("#resendbtn").attr("disabled","disabled");
           $("#resendbtn").addClass("disable");
           $("#resendbtn").val(resendtime+" 重发手机确认码");
           resendtime--;
          },1000);
	}
	
    function isContinuousChar(str){
    	var str = str.toLowerCase();
        var flag = 0;
        for(var i=0;i<str.length;i++){
        	if(str.charCodeAt(i) != flag+1 && flag!=0)
        		return false;
        	else
        		flag = str.charCodeAt(i);
        }
        return true;
    }
    
    function isSameChar(str){
    	var str = str.toLowerCase();
        var flag = 0;
        for(var i=0;i<str.length;i++){
        	if(str.charCodeAt(i) != flag && flag!=0)
        		return false;
        	else
        		flag = str.charCodeAt(i);
        }
        return true;
    }
    
    function fillUsername(username){
    	$("#nickName").val(username);
    	$("#nickName").focus();
   // 	clearSug("username");
    }
    
    function fillEmail(email){
    	$("#txtemail").val(email);
    	$("#txtemail").focus();
    	clearSug("email");
    }
    
    function clearSug(name){
    	if(!name){
    		$("#reg-keyword").remove();
			return;    		
    	}
    	$("#reg-keyword-"+name).hide(300);
    	$("#"+name+"_comp").html("");
    //	$("#reg-keyword-"+name).remove();
    }
    
    var showSug = function(arr,textid){
    	if(!arr || arr.length<1){
    		return;
    	}
    	var isUserName = textid=="nickName";
    	if(isUserName){
    		var usernameCompContent = "";
            $.each(arr,function(i,n){
            	if(arr.length>0)
            		usernameCompContent += '<li onclick="fillUsername(\''+arr[i]+'\')"><label><input name="usernameSugRadio" type="radio" />'+arr[i]+'</label></li>';
        	});
            if(arr.length>0){
          		$("#username_comp").html(usernameCompContent);
            	$("#reg-keyword-username").show(500);
            	$("#username_comp").unbind("click").bind("click",function(e){e.stopPropagation();})
            }
            showSugTime = new Date().getTime();
    		return;
    	}
    	var obj = $("#"+textid); 
    	var left = obj.offset().left;
    	var top = obj.offset().top + obj.height();

    	var content = '<div class="w234-ui2" id="reg-keyword" style="position: absolute; z-index: 999; top: '+top+'px; left: '+left+'px;"><p>'+(isUserName?'选择推荐用户名':'请选择您的邮箱类型')+'：</p><ul>';
    	$.each(arr,function(i,n){
    		content += '<li  onclick="fillText(\''+textid+'\',this)">'+n+'</li>';
    	});
    	content += '</ul></div>';
    	$(content).insertAfter("form");
    	
    	$("#reg-keyword").mouseover(function(){
    		//$(this).find("li.reg-keyahover").removeClass("reg-keyahover");
    	});
    	$("#reg-keyword li").mouseover(function(){
    		$(this).siblings().removeClass("reg-keyahover");
    		$(this).addClass("reg-keyahover");
    		
    	}).mouseout(function(){
    		$(this).removeClass("reg-keyahover");
    		
    	})


    	showSugTime = new Date().getTime();
    }
    
    function fillText(textId,selectObj){
    	_txtemail__suffix = "";
    	$(selectObj).parent().parent().remove();
    	$("#"+textId).val(selectObj.innerHTML);
    	$("#"+textId).focus();
    }

    function validMobileFormat(mobile){
	    var numberRegStr = /^\d{11}$/;
	    var regNum = new RegExp(numberRegStr);
	    if (regNum.test(mobile)) {
	        var telRegStr = /^(13|14|15|17|18)\d{9}$/;
	        var reg = new RegExp(telRegStr);
	        if (reg.test(mobile)) {
	            return true;
	        }
	        else {
	            return false;
	        }
	    }
	    else {
	        return false;
	    }
    }
    
    function resendcode(){
    	var timesign = new Date().getTime() + timespan;
       	var validatecode =  $("#validatecode").val();
   	
    	$.get("/sendregmobilecode",
				{
					"timesign":timesign,
					"resend":"true"
				},
				function(result){
					if(result=="1"){
						$("#resendcode_Tip").addClass("chenggong");
						$("#resendcode_Tip").html("确认码短信已发送到您的手机，请查收");
						resendtime = 180;
						countresent(resendtime);
					}else{
						$("#resendcode_Tip").removeClass("chenggong");
						$("#resendcode_Tip").html("");
						if(result=="5"){
							$.formValidator.setTipState(null, "onError", '该手机号码已被注册。您可以使用该手机号码<a href="/login">登录</a>，如果您忘记密码请点击<a href="/forgetpassword">找回密码</a>。', 'mobile_Tip2');
						}else if(result=="6"){
							$.formValidator.setTipState(null, "onError", '该手机号码今天发送验证码过多', 'mobile_Tip2');
						}else{
							$.formValidator.setTipState(null, "onError", '手机号码格式错误', 'mobile_Tip2');
						}
					}
				},"html");
    }
    
    function isEmpty(str){
    	return str==null || str.length==0;
    }
    
    function isMobileRegister(){
    	return $("#submitForm").attr("action") == "/domobileregister";
    }
    
</script>
<script type="text/javascript">
function flushWxqrcode(login){
	$.get("/wxqrcode?isreg=1&temp=1" + (new Date().getTime().toString(36)),
		function(result){
			if(result){
				result = eval('('+result+')');
				$("#wxqrcodeImg").attr("src", result.pic);
				if(login)
					flushWxqrcodeLogin();
			}
		}	
	);
}
function flushWxqrcodeLogin(){
	$.ajax({
		url : "/wxqrcodelogin",
		type : "post",
		data : {"path":"http://my.58.com/"},
		dataType : "json",
		success : function(result){
			if(result.type=="success"){
				window.location.href = result.path;
			}else if(result.type=="warnusererror"){
				window.location.href = "/login?wuid="+result.wuid;
			}else{
				flushWxqrcodeLogin();
			}
		},
		error : function(XMLHttpRequest, textStatus, errorThrown) {
			flushWxqrcodeLogin();
        }
	});
}
$(function() {
	flushWxqrcode(true);
	setInterval("flushWxqrcode(false)", 1800000);
});
</script>
<script type="text/javascript">
var iqas_mcvalue = '';var iqas_mcformula = '';$(function(){$("<input name='mcresult' value='"+eval(iqas_mcformula.replace('checkValue', iqas_mcvalue))+"' / style='display:none'>").appendTo($('#submitForm'));});
</script>
<div style="display:none">
<script type="text/javascript">
var _gaq = _gaq || []; var site_name = "58";
_gaq.push(['pageTracker._setAccount', 'UA-877409-4']); 
_gaq.push(['pageTracker._setDomainName', '.58.com']);
_gaq.push(['pageTracker._setAllowLinker', true]); 
_gaq.push(['pageTracker._addOrganic', 'sogou', 'query']);
_gaq.push(['pageTracker._addOrganic', 'baidu', 'word']);
_gaq.push(['pageTracker._addOrganic', 'soso', 'w']);
_gaq.push(['pageTracker._addOrganic', 'youdao', 'q']);
_gaq.push(['pageTracker._trackPageview']);
fe.init(function(){ 
	js.append(('https:' == document.location.protocol ? ' https://ssl' : ' http://www') + '.google-analytics.com/ga.js'); 
	js.append(' https://passport.58.com/tracklog/ppt/referrer4.js');
});
</script>
</div><div style="display:inline;">
<img style="border-style:none;" alt="" src="__PUBLIC__/Home/images/a.gif" height="1" width="1">
</div>


</body></html>